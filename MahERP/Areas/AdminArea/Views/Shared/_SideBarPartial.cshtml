@{

}

<!-- Sidebar -->
<nav aria-label="Main Navigation" id="sidebar">
    <!-- Side Header -->
    <div class="bg-header-dark">
        <div class="content-header bg-white-5">
            <!-- Logo -->
            <a asp-area="AdminArea" asp-controller="Dashboard" asp-action="Index" class="fw-semibold text-white tracking-wide">
                <span class="smini-visible">
                    <span class="opacity-75"></span>
                </span>
                <span class="smini-hidden">
                    Mah<span class="opacity-75">ERP</span>
                </span>
            </a>
            <!-- END Logo -->
            <!-- Options -->
            <div>
                <!-- Notification Bell -->
                <div class="dropdown d-inline-block me-2">
                    <button class="btn btn-sm btn-alt-secondary position-relative" type="button" id="notificationBell" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fa fa-bell"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="notificationCount" style="font-size: 0.65em; display: none;">
                            0
                        </span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end p-0" aria-labelledby="notificationBell" style="min-width: 350px; max-height: 400px; overflow-y: auto;">
                        <!-- Notification Header -->
                        <div class="dropdown-header d-flex justify-content-between align-items-center bg-primary text-white">
                            <span class="fw-semibold">نوتیفیکیشن‌ها</span>
                            <div>
                                <button class="btn btn-sm btn-outline-light me-1" onclick="markAllNotificationsAsRead()" title="همه را خوانده شده علامت‌گذاری کن">
                                    <i class="fa fa-check-double fa-xs"></i>
                                </button>
                                <a href="@Url.Action("Index", "Notification", new { area = "AdminArea" })" class="btn btn-sm btn-outline-light" title="مشاهده همه">
                                    <i class="fa fa-external-link-alt fa-xs"></i>
                                </a>
                            </div>
                        </div>
                        
                        <!-- Notification List -->
                        <div id="notificationsList">
                            <div class="text-center p-3">
                                <div class="spinner-border spinner-border-sm text-primary" role="status">
                                    <span class="visually-hidden">در حال بارگذاری...</span>
                                </div>
                                <div class="mt-2 text-muted small">در حال بارگذاری...</div>
                            </div>
                        </div>
                        
                        <!-- Footer -->
                        <div class="dropdown-divider m-0"></div>
                        <div class="dropdown-item text-center">
                            <a href="@Url.Action("Index", "Notification", new { area = "AdminArea" })" class="text-decoration-none">
                                <i class="fa fa-eye me-1"></i>
                                مشاهده همه نوتیفیکیشن‌ها
                            </a>
                        </div>
                    </div>
                </div>
                <!-- END Notification Bell -->
                
                <!-- Toggle Sidebar Style -->
                <button class="btn btn-sm btn-alt-secondary" data-class="fa-toggle-off fa-toggle-on" data-target="#sidebar-style-toggler" data-toggle="class-toggle" onclick="Dashmix.layout('sidebar_style_toggle');Dashmix.layout('header_style_toggle');" type="button">
                    <i class="fa fa-toggle-off" id="sidebar-style-toggler"></i>
                </button>
                <!-- END Toggle Sidebar Style -->
                <!-- Dark Mode -->
                <button class="btn btn-sm btn-alt-secondary" data-class="far fa" data-target="#dark-mode-toggler" data-toggle="class-toggle" onclick="Dashmix.layout('dark_mode_toggle');" type="button">
                    <i class="far fa-moon" id="dark-mode-toggler"></i>
                </button>
                <!-- END Dark Mode -->
                <!-- Close Sidebar, Visible only on mobile screens -->
                <button class="btn btn-sm btn-alt-secondary d-lg-none" data-action="sidebar_close" data-toggle="layout" type="button">
                    <i class="fa fa-times-circle"></i>
                </button>
                <!-- END Close Sidebar -->
            </div>
            <!-- END Options -->
        </div>
    </div>
    <!-- END Side Header -->
    <!-- Sidebar Scrolling -->
    <div class="js-sidebar-scroll">
        <!-- Side Navigation -->
        <div class="content-side">

            <ul class="nav-main">

                <li class="nav-main-heading">گزارشات</li>

                <li class="nav-main-item">
                    <a class="nav-main-link" asp-area="AdminArea" asp-controller="Dashboard" asp-action="Index">
                        <i class="nav-main-link-icon fa fa-tachometer-alt"></i>
                        <span class="nav-main-link-name">داشبورد</span>
                    </a>
                </li>

                <!-- Notifications Menu Item -->
                <li class="nav-main-item">
                    <a class="nav-main-link" asp-area="AdminArea" asp-controller="Notification" asp-action="Index">
                        <i class="nav-main-link-icon fa fa-bell"></i>
                        <span class="nav-main-link-name">نوتیفیکیشن‌ها</span>
                        <span class="nav-main-link-badge badge bg-danger rounded-pill ms-1" id="sidebarNotificationCount" style="display: none;">0</span>
                    </a>
                </li>

                <li class="nav-main-heading">مدیریت کسب‌وکار</li>

                <li class="nav-main-item">
                    <a aria-expanded="false" aria-haspopup="true" class="nav-main-link nav-main-link-submenu" data-toggle="submenu" href="#">
                        <i class="nav-main-link-icon fa fa-handshake"></i>
                        <span class="nav-main-link-name">طرف حساب‌ها</span>
                    </a>
                    <ul class="nav-main-submenu">
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="Stakeholder" asp-action="AddStakeholder">
                                <i class="nav-main-link-icon fa fa-plus-circle"></i>
                                <span class="nav-main-link-name">طرف حساب جدید</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="Stakeholder" asp-action="Index">
                                <i class="nav-main-link-icon fa fa-list"></i>
                                <span class="nav-main-link-name">لیست طرف حساب‌ها</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" href="#" data-bs-toggle="modal" data-bs-target="#modal-advanced-search" onclick="loadAdvancedSearchModal()">
                                <i class="nav-main-link-icon fa fa-search"></i>
                                <span class="nav-main-link-name">جستجوی پیشرفته</span>
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-main-item">
                    <a aria-expanded="false" aria-haspopup="true" class="nav-main-link nav-main-link-submenu" data-toggle="submenu" href="#">
                        <i class="nav-main-link-icon fa fa-file-contract"></i>
                        <span class="nav-main-link-name">قراردادها</span>
                    </a>
                    <ul class="nav-main-submenu">
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="Contract" asp-action="AddContract">
                                <i class="nav-main-link-icon fa fa-plus-circle"></i>
                                <span class="nav-main-link-name">قرارداد جدید</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="Contract" asp-action="Index">
                                <i class="nav-main-link-icon fa fa-list"></i>
                                <span class="nav-main-link-name">لیست قراردادها</span>
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-main-heading">عملیاتها</li>

                <!-- Task Management Section -->
                <li class="nav-main-item">
                    <a aria-expanded="false" aria-haspopup="true" class="nav-main-link nav-main-link-submenu" data-toggle="submenu" href="#">
                        <i class="nav-main-link-icon fa fa-tasks"></i>
                        <span class="nav-main-link-name">مدیریت تسک‌ها</span>
                    </a>
                    <ul class="nav-main-submenu">
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="Tasks" asp-action="Index">
                                <i class="nav-main-link-icon fa fa-list"></i>
                                <span class="nav-main-link-name">لیست تسک‌ها</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="Tasks" asp-action="MyTasks">
                                <i class="nav-main-link-icon fa fa-clipboard-check"></i>
                                <span class="nav-main-link-name">تسک‌های من</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="Tasks" asp-action="CreateNewTask" asp-route-AddressRouteInComingUrl="side">
                                <i class="nav-main-link-icon fa fa-plus-circle"></i>
                                <span class="nav-main-link-name">تسک جدید</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="TaskCategory" asp-action="Index">
                                <i class="nav-main-link-icon fa fa-tag"></i>
                                <span class="nav-main-link-name">دسته‌بندی‌ها</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" href="#" data-bs-toggle="modal" data-bs-target="#modal-advanced-search-task" onclick="loadTaskAdvancedSearchModal()">
                                <i class="nav-main-link-icon fa fa-search"></i>
                                <span class="nav-main-link-name">جستجوی پیشرفته</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <!-- END Task Management Section -->

                <!-- CRM Management Section -->
                <li class="nav-main-item">
                    <a class="nav-main-link nav-main-link-submenu" data-toggle="submenu" aria-haspopup="true" aria-expanded="false" href="#">
                        <i class="nav-main-link-icon fa fa-handshake"></i>
                        <span class="nav-main-link-name">مدیریت مشتریان</span>
                    </a>
                    <ul class="nav-main-submenu">
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="CRM" asp-action="Index">
                                <i class="nav-main-link-icon fa fa-list"></i>
                                <span class="nav-main-link-name">تعاملات CRM</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="CRM" asp-action="Create">
                                <i class="nav-main-link-icon fa fa-plus-circle"></i>
                                <span class="nav-main-link-name">افزودن تعامل جدید</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="CRM" asp-action="MyInteractions">
                                <i class="nav-main-link-icon fa fa-user-friends"></i>
                                <span class="nav-main-link-name">تعاملات من</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" asp-area="AdminArea" asp-controller="CRM" asp-action="Statistics">
                                <i class="nav-main-link-icon fa fa-chart-bar"></i>
                                <span class="nav-main-link-name">آمار و گزارشات</span>
                            </a>
                        </li>
                    </ul>
                </li>

                <!-- User and Permission Management -->
                @if (User.IsInRole("Admin") || User.IsInRole("Manager"))
                {
                    <li class="nav-main-heading">مدیریت کاربران و دسترسی</li>
                    
                    <!-- Branch Management -->
                    <li class="nav-main-item">
                        <a aria-expanded="false" aria-haspopup="true" class="nav-main-link nav-main-link-submenu" data-toggle="submenu" href="#">
                            <i class="nav-main-link-icon fa fa-sitemap"></i>
                            <span class="nav-main-link-name">مدیریت شعب</span>
                        </a>
                        <ul class="nav-main-submenu">
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="Branch" asp-action="Index">
                                    <i class="nav-main-link-icon fa fa-list"></i>
                                    <span class="nav-main-link-name">لیست شعب</span>
                                </a>
                            </li>
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="Branch" asp-action="AddBranch">
                                    <i class="nav-main-link-icon fa fa-plus-circle"></i>
                                    <span class="nav-main-link-name">افزودن شعبه جدید</span>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- User Management -->
                    <li class="nav-main-item">
                        <a aria-expanded="false" aria-haspopup="true" class="nav-main-link nav-main-link-submenu" data-toggle="submenu" href="#">
                            <i class="nav-main-link-icon fa fa-users"></i>
                            <span class="nav-main-link-name">مدیریت کاربران</span>
                        </a>
                        <ul class="nav-main-submenu">
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="UserManager" asp-action="Index">
                                    <i class="nav-main-link-icon fa fa-list"></i>
                                    <span class="nav-main-link-name">لیست کاربران</span>
                                </a>
                            </li>
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="UserManager" asp-action="AddUser">
                                    <i class="nav-main-link-icon fa fa-user-plus"></i>
                                    <span class="nav-main-link-name">افزودن کاربر جدید</span>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- Permission Management -->
                    <li class="nav-main-item">
                        <a aria-expanded="false" aria-haspopup="true" class="nav-main-link nav-main-link-submenu" data-toggle="submenu" href="#">
                            <i class="nav-main-link-icon fa fa-shield-alt"></i>
                            <span class="nav-main-link-name">مدیریت نقش‌ها</span>
                        </a>
                        <ul class="nav-main-submenu">
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="RolePattern" asp-action="Index">
                                    <i class="nav-main-link-icon fa fa-key"></i>
                                    <span class="nav-main-link-name">الگوهای نقش</span>
                                </a>
                            </li>
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="UserPermission" asp-action="Index">
                                    <i class="nav-main-link-icon fa fa-users-cog"></i>
                                    <span class="nav-main-link-name">دسترسی کاربران</span>
                                </a>
                            </li>
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="UserPermission" asp-action="PermissionLogs">
                                    <i class="nav-main-link-icon fa fa-clipboard-list"></i>
                                    <span class="nav-main-link-name">لاگ دسترسی‌ها</span>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- User Activity Log Management -->
                    <li class="nav-main-item">
                        <a aria-expanded="false" aria-haspopup="true" class="nav-main-link nav-main-link-submenu" data-toggle="submenu" href="#">
                            <i class="nav-main-link-icon fas fa-history"></i>
                            <span class="nav-main-link-name">لاگ فعالیت‌ها</span>
                        </a>
                        <ul class="nav-main-submenu">
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="UserActivityLog" asp-action="Index">
                                    <i class="nav-main-link-icon fas fa-list"></i>
                                    <span class="nav-main-link-name">لیست فعالیت‌ها</span>
                                </a>
                            </li>
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="UserActivityLog" asp-action="Search">
                                    <i class="nav-main-link-icon fas fa-search"></i>
                                    <span class="nav-main-link-name">جستجوی پیشرفته</span>
                                </a>
                            </li>
                            <li class="nav-main-item">
                                <a class="nav-main-link" asp-area="AdminArea" asp-controller="UserActivityLog" asp-action="Statistics">
                                    <i class="nav-main-link-icon fas fa-chart-line"></i>
                                    <span class="nav-main-link-name">آمار و گزارشات</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                }

                <!-- System Settings (Only for Admins) -->
                @if (User.IsInRole("Admin"))
                {
                    <li class="nav-main-heading">تنظیمات سیستم</li>
                    
                    <li class="nav-main-item">
                        <a class="nav-main-link" asp-area="AdminArea" asp-controller="Team" asp-action="Index">
                            <i class="nav-main-link-icon fa fa-users-cog"></i>
                            <span class="nav-main-link-name">تیم‌ها</span>
                        </a>
                    </li>
                }

                <!-- Logout -->
                <li class="nav-main-heading">خروج</li>
                <li class="nav-main-item">
                    <a class="nav-main-link" href="javascript:void(0)" onclick="document.getElementById('logoutForm').submit();">
                        <i class="nav-main-link-icon fa fa-sign-out-alt"></i>
                        <span class="nav-main-link-name">خروج از سیستم</span>
                    </a>
                </li>

            </ul>

        </div>
        <!-- END Side Navigation -->
    </div>
    <!-- END Sidebar Scrolling -->
</nav>
<!-- END Sidebar -->

<!-- Hidden Logout Form -->
<form id="logoutForm" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })" method="post" class="d-none">
    @Html.AntiForgeryToken()
</form>

<!-- Modal Advanced Search -->
<div class="modal fade" id="modal-advanced-search" tabindex="-1" role="dialog" aria-labelledby="modal-advanced-search" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" id="advanced-search-content">
            <!-- Content will be loaded here via AJAX -->
        </div>
    </div>
</div>

<!-- Modal Advanced Search for Tasks -->
<div class="modal fade" id="modal-advanced-search-task" tabindex="-1" role="dialog" aria-labelledby="modal-advanced-search-task" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" id="advanced-search-task-content">
            <!-- Content will be loaded here via AJAX -->
        </div>
    </div>
</div>

<!-- JavaScript for Advanced Search Modal -->
<script>
    function loadAdvancedSearchModal() {
        createAndShowModal('@Url.Action("AdvancedSearch", "Stakeholder", new { area = "AdminArea" })');
    }

    function loadTaskAdvancedSearchModal() {
        createAndShowModal('@Url.Action("AdvancedSearch", "Tasks", new { area = "AdminArea" })');
    }

    function createAndShowModal(url) {
        // Show loading state
        $('#advanced-search-content, #advanced-search-task-content').html(`
            <div class="modal-body text-center">
                <div class="d-flex justify-content-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">در حال بارگذاری...</span>
                    </div>
                </div>
                <p class="mt-3">در حال بارگذاری...</p>
            </div>
        `);

        // Load content via AJAX
        $.get(url, function(data) {
            if (url.includes('Tasks')) {
                $('#advanced-search-task-content').html(data);
            } else {
                $('#advanced-search-content').html(data);
            }
        }).fail(function() {
            const errorContent = `
                <div class="modal-body text-center">
                    <div class="alert alert-danger">
                        <i class="fa fa-exclamation-triangle me-2"></i>
                        خطا در بارگذاری محتوا. لطفاً دوباره تلاش کنید.
                    </div>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">بستن</button>
                </div>
            `;
            if (url.includes('Tasks')) {
                $('#advanced-search-task-content').html(errorContent);
            } else {
                $('#advanced-search-content').html(errorContent);
            }
        });
    }

    // Notification Management Scripts
    $(document).ready(function() {
        // Load notifications on page load
        loadNotifications();
        
        // Update notifications every 30 seconds
        setInterval(loadNotifications, 30000);
        
        // Close dropdown when clicking outside
        $(document).on('click', function(e) {
            if (!$(e.target).closest('#notificationBell').length) {
                $('.dropdown-menu').removeClass('show');
            }
        });
    });

    function loadNotifications() {
        $.get('@Url.Action("GetLatestNotifications", "Notification", new { area = "AdminArea" })', { count: 5 }, function(response) {
            if (response.success) {
                updateNotificationUI(response.notifications, response.unreadCount);
            }
        }).fail(function() {
            console.error('خطا در بارگذاری نوتیفیکیشن‌ها');
        });
    }

    function updateNotificationUI(notifications, unreadCount) {
        // Update badge counts
        if (unreadCount > 0) {
            $('#notificationCount').text(unreadCount).show();
            $('#sidebarNotificationCount').text(unreadCount).show();
            
            // Add pulsing animation for new notifications
            $('#notificationBell').addClass('notification-pulse');
        } else {
            $('#notificationCount').hide();
            $('#sidebarNotificationCount').hide();
            $('#notificationBell').removeClass('notification-pulse');
        }

        // Update notification list
        let notificationHtml = '';
        
        if (notifications.length === 0) {
            notificationHtml = `
                <div class="text-center p-3 text-muted">
                    <i class="fa fa-bell-slash fa-2x mb-2"></i>
                    <div>هیچ نوتیفیکیشنی وجود ندارد</div>
                </div>
            `;
        } else {
            notifications.forEach(function(notification) {
                const isReadClass = notification.isRead ? 'notification-read' : 'notification-unread';
                const priorityClass = notification.priorityClass || '';
                
                notificationHtml += `
                    <div class="dropdown-item notification-item ${isReadClass} ${priorityClass}" data-notification-id="${notification.id}">
                        <div class="d-flex">
                            <div class="flex-shrink-0 me-2">
                                <i class="fa ${notification.icon} text-primary"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-start">
                                    <h6 class="mb-1 fw-semibold text-truncate">${notification.title}</h6>
                                    ${!notification.isRead ? '<span class="badge bg-danger rounded-pill">جدید</span>' : ''}
                                </div>
                                <p class="mb-1 text-muted small">${notification.message}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">${notification.systemName}</small>
                                    <small class="text-muted">${notification.createTime}</small>
                                </div>
                                <div class="mt-1">
                                    ${notification.actionUrl ? 
                                        `<a href="javascript:void(0)" onclick="goToNotificationRecord(${notification.id})" class="btn btn-xs btn-primary me-1">
                                            <i class="fa fa-eye fa-xs"></i>
                                        </a>` : ''
                                    }
                                    ${!notification.isRead ? 
                                        `<button class="btn btn-xs btn-success" onclick="markSingleNotificationAsRead(${notification.id})">
                                            <i class="fa fa-check fa-xs"></i>
                                        </button>` : ''
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
        }
        
        $('#notificationsList').html(notificationHtml);
    }

    function markSingleNotificationAsRead(notificationId) {
        $.post('@Url.Action("MarkAsRead", "Notification", new { area = "AdminArea" })', { id: notificationId }, function(response) {
            if (response.success) {
                loadNotifications(); // Refresh the list
            } else {
                console.error('خطا در علامت‌گذاری نوتیفیکیشن');
            }
        });
    }

    function markAllNotificationsAsRead() {
        $.post('@Url.Action("MarkAllAsRead", "Notification", new { area = "AdminArea" })', function(response) {
            if (response.success) {
                loadNotifications(); // Refresh the list
                // Show success message
                if (typeof Swal !== 'undefined') {
                    Swal.fire({
                        icon: 'success',
                        title: 'موفق',
                        text: response.message,
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            } else {
                console.error('خطا در علامت‌گذاری همه نوتیفیکیشن‌ها');
            }
        });
    }

    function goToNotificationRecord(notificationId) {
        window.location.href = '@Url.Action("GoToRelated", "Notification", new { area = "AdminArea" })' + '?id=' + notificationId;
    }

    // Click on notification item to mark as read and go to details
    $(document).on('click', '.notification-item', function(e) {
        if (!$(e.target).is('button, a, .btn')) {
            const notificationId = $(this).data('notification-id');
            window.location.href = '@Url.Action("Details", "Notification", new { area = "AdminArea" })' + '?id=' + notificationId;
        }
    });
</script>

<style>
    .notification-pulse {
        animation: notificationPulse 1.5s infinite;
    }

    @@keyframes notificationPulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }

    .notification-unread {
        background-color: rgba(13, 110, 253, 0.1);
        border-right: 3px solid #0d6efd;
    }

    .notification-read {
        opacity: 0.7;
    }

    .notification-item {
        border-bottom: 1px solid #dee2e6;
        cursor: pointer;
        transition: background-color 0.2s ease;
    }

    .notification-item:hover {
        background-color: rgba(0, 0, 0, 0.05);
    }

    .notification-item:last-child {
        border-bottom: none;
    }

    .priority-important {
        border-right-color: #ffc107 !important;
    }

    .priority-urgent {
        border-right-color: #dc3545 !important;
    }

    .priority-critical {
        border-right-color: #dc3545 !important;
        animation: criticalPulse 2s infinite;
    }

    @@keyframes criticalPulse {
        0% { background-color: rgba(220, 53, 69, 0.1); }
        50% { background-color: rgba(220, 53, 69, 0.2); }
        100% { background-color: rgba(220, 53, 69, 0.1); }
    }

    .dropdown-menu {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.175);
    }

    .dropdown-header {
        padding: 0.75rem 1rem;
        margin: 0;
    }

    .btn-xs {
        padding: 0.125rem 0.25rem;
        font-size: 0.675rem;
        line-height: 1.2;
        border-radius: 0.125rem;
    }
</style>