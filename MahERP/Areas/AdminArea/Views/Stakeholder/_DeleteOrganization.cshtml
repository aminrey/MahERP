@model MahERP.DataModelLayer.Entities.AcControl.StakeholderOrganization

@{
    Layout = null;
}

<style>
    .modal {
        --bs-modal-width: 50%;
        transition: 0.3s;
    }
</style>

<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="block block-rounded block-themed block-transparent mb-0 modal-contents">
            <div class="block-header bg-danger-dark">
                <h3 class="block-title">
                    <i class="fa fa-exclamation-triangle me-2"></i>
                    حذف واحد سازمانی
                </h3>
                <div class="block-options">
                    <button aria-label="Close" class="btn-block-option" data-bs-dismiss="modal" type="button">
                        <i class="fa fa-fw fa-times"></i>
                    </button>
                </div>
            </div>

            <form asp-action="DeleteOrganizationPost" method="post">
                @Html.AntiForgeryToken()
                <input type="hidden" name="id" value="@Model.Id" />

                <div class="block-content">
                    @if (ViewBag.HasChildren)
                    {
                        <div class="alert alert-danger">
                            <i class="fa fa-times-circle me-2"></i>
                            <strong>امکان حذف وجود ندارد!</strong>
                            <p class="mb-0 mt-2">
                                این واحد دارای زیرمجموعه است. ابتدا باید زیرمجموعه‌ها را حذف کنید.
                            </p>
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-warning">
                            <i class="fa fa-exclamation-triangle me-2"></i>
                            <strong>هشدار!</strong> این عملیات قابل بازگشت نیست.
                        </div>

                        <p class="mb-3">
                            آیا از حذف واحد سازمانی زیر اطمینان دارید؟
                        </p>

                        <div class="bg-light p-3 rounded mb-3">
                            <h6 class="mb-2">
                                <i class="fa fa-building me-2"></i>
                                <strong>@Model.Title</strong>
                            </h6>
                            @if (!string.IsNullOrEmpty(Model.Description))
                            {
                                <p class="mb-0 text-muted small">@Model.Description</p>
                            }
                        </div>

                        @if (ViewBag.HasMembers)
                        {
                            <div class="alert alert-info mb-0">
                                <i class="fa fa-info-circle me-2"></i>
                                این واحد دارای <strong>@Model.Members.Count عضو</strong> است که با حذف واحد، اعضا نیز حذف خواهند شد.
                            </div>
                        }
                    }
                </div>

                <div class="block-content block-content-full text-end bg-body">
                    <button class="btn btn-sm btn-alt-secondary" data-bs-dismiss="modal" type="button">
                        <i class="fa fa-times me-1"></i> انصراف
                    </button>
                    @if (!ViewBag.HasChildren)
                    {
                        <button class="btn btn-sm btn-danger" data-save="modal-ajax-save" type="button">
                            <i class="fa fa-trash me-1"></i> حذف قطعی
                        </button>
                    }
                </div>
            </form>
        </div>
    </div>
</div>