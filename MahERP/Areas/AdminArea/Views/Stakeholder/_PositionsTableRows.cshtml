@model List<MahERP.DataModelLayer.Entities.AcControl.StakeholderOrganizationPosition>

@foreach (var position in Model.OrderBy(p => p.PowerLevel))
{
    <tr class="@(!position.IsActive ? "table-secondary" : "")">
        <td class="text-center">
            <i class="fa fa-circle fa-sm text-@(position.IsActive ? "success" : "muted")"></i>
        </td>
        <td>
            <strong>@position.Title</strong>
            @if (!string.IsNullOrEmpty(position.Description))
            {
                <br />
                <small class="text-muted">@position.Description</small>
            }
        </td>
        <td>
            <span class="badge bg-primary">سطح @position.PowerLevel</span>
        </td>
        <td>@position.DisplayOrder</td>
        <td class="text-center">
            @if (position.IsDefault)
            {
                <span class="badge bg-success">
                    <i class="fa fa-check"></i>
                </span>
            }
            else
            {
                <span class="text-muted">-</span>
            }
        </td>
        <td class="text-center">
            @if (position.IsActive)
            {
                <span class="badge bg-success">فعال</span>
            }
            else
            {
                <span class="badge bg-danger">غیرفعال</span>
            }
        </td>
        <td class="text-center">
            <span class="badge bg-info">
                @(position.Members?.Count ?? 0) نفر
            </span>
        </td>
        <td class="text-center">
            <button type="button" class="btn btn-sm btn-alt-primary" 
                    onclick="editPosition(@position.Id)">
                <i class="fa fa-edit"></i>
            </button>
            @if (position.Members?.Count == 0 || position.Members == null)
            {
                <button type="button" class="btn btn-sm btn-alt-danger" 
                        onclick="deletePosition(@position.Id)">
                    <i class="fa fa-trash"></i>
                </button>
            }
        </td>
    </tr>
}