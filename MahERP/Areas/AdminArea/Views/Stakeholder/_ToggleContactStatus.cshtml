@model StakeholderContact
@{
    Layout = null;
    var fullName = $"{Model.FirstName} {Model.LastName}";
}

<div class="modal-header">
    <h5 class="modal-title">@ViewBag.ModalTitle</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
    <form id="toggle-contact-status-form" method="post" action="@Url.Action("ToggleContactStatusPost", "Stakeholder")">
        @Html.AntiForgeryToken()
        <input type="hidden" name="id" value="@Model.Id" />

        <div class="py-3 text-center">
            @if (Model.IsActive)
            {
                <i class="fa fa-ban fa-3x text-warning mb-3"></i>
                <h4>آیا از غیرفعال کردن این فرد مرتبط اطمینان دارید؟</h4>
                <p class="text-muted mb-0">
                    با غیرفعال کردن فرد مرتبط "<strong>@fullName</strong>"، این فرد در لیست‌های انتخاب نمایش داده نخواهد شد.
                    <br>این عملیات قابل بازگشت است.
                </p>
            }
            else
            {
                <i class="fa fa-check fa-3x text-success mb-3"></i>
                <h4>آیا از فعال کردن این فرد مرتبط اطمینان دارید؟</h4>
                <p class="text-muted mb-0">
                    با فعال کردن فرد مرتبط "<strong>@fullName</strong>"، این فرد مجدداً در لیست‌های انتخاب نمایش داده خواهد شد.
                </p>
            }

            @if (Model.IsPrimary)
            {
                <div class="alert alert-info mt-3">
                    <i class="fa fa-info-circle me-1"></i> <strong>توجه!</strong>
                    این فرد به عنوان مخاطب اصلی طرف حساب تعیین شده است.
                </div>
            }
        </div>
    </form>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-alt-secondary" data-bs-dismiss="modal">انصراف</button>
    <button type="button" class="@ViewBag.ButtonClass" data-save="modal">
        <i class="fa fa-@(Model.IsActive ? "ban" : "check") me-1"></i> @ViewBag.ActionText
    </button>
</div>

@section scripts {
    <script>
        // ارسال فرم با کلیک روی دکمه فعال/غیرفعال
        $(document).on('click', '[data-save="modal"]', function () {
            $('#toggle-contact-status-form').submit();
        });
    </script>
}