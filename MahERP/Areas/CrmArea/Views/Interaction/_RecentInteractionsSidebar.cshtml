@model MahERP.DataModelLayer.ViewModels.CrmViewModels.RecentInteractionsViewModel

@if (Model.Interactions.Any())
{
    <div class="list-group list-group-flush">
        @foreach (var item in Model.Interactions)
        {
            <a href="@Url.Action("Details", "Interaction", new { area = "CrmArea", id = item.Id })" 
               class="list-group-item list-group-item-action py-2">
                <div class="d-flex w-100 justify-content-between align-items-start">
                    <div class="d-flex align-items-start flex-grow-1">
                        <span class="me-2" style="color: @(item.InteractionTypeColor ?? "#6c757d")">
                            <i class="fa @(item.InteractionTypeIcon ?? "fa-comment")"></i>
                        </span>
                        <div class="flex-grow-1" style="min-width: 0;">
                            <div class="fw-semibold small text-truncate" title="@item.Subject">
                                @item.Subject
                            </div>
                            <small class="text-muted text-truncate d-block" style="max-width: 180px;" title="@item.ContactName">
                                <i class="fa fa-user fa-fw"></i>
                                @item.ContactName
                            </small>
                            @if (!string.IsNullOrEmpty(item.InteractionTypeName))
                            {
                                <span class="badge badge-sm mt-1" style="background-color: @(item.InteractionTypeColor ?? "#6c757d"); font-size: 0.65rem;">
                                    @item.InteractionTypeName
                                </span>
                            }
                        </div>
                    </div>
                    <small class="text-muted text-nowrap ms-2">
                        @item.TimeAgo
                    </small>
                </div>
            </a>
        }
    </div>
}
else
{
    <div class="text-center py-4">
        <i class="fa fa-inbox fa-2x text-muted mb-2"></i>
        <p class="text-muted small mb-0">هیچ تعاملی یافت نشد</p>
    </div>
}

<style>
    /* استایل یکسان */
    .list-group-item {
        border-left: 0;
        border-right: 0;
        border-top: 0;
        transition: background-color 0.15s ease-in-out;
    }
    
    .list-group-item:last-child {
        border-bottom: 0;
    }
    
    .list-group-item:hover {
        background-color: rgba(0, 0, 0, 0.03);
    }
    
    .badge-sm {
        font-size: 0.65rem;
        padding: 0.2em 0.4em;
    }
    
    .text-truncate {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
</style>
