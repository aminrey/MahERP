@model SettingItemViewModel

<div class="setting-item" data-setting-id="@Model.SettingId">
    <div class="setting-header">
        <h6 class="mb-2">
            @switch (Model.SettingId)
            {
                case 1:
                    <i class="fa fa-comments text-primary me-2"></i>
                    break;
                case 2:
                    <i class="fa fa-user-plus text-success me-2"></i>
                    break;
                case 3:
                    <i class="fa fa-user-minus text-danger me-2"></i>
                    break;
                case 4:
                    <i class="fa fa-edit text-warning me-2"></i>
                    break;
            }
            @Model.Title
        </h6>
        <p class="text-muted small mb-3">@Model.Description</p>
    </div>

    <div class="setting-roles">
        @foreach (var role in Model.AvailableRoles)
        {
            <div class="form-check form-check-inline">
                <input class="form-check-input" 
                       type="checkbox" 
                       id="@($"category_setting_{Model.SettingId}_role_{role.RoleCode}")" 
                       name="@GetCategoryRoleFieldName(Model.SettingId)"
                       value="@role.RoleCode"
                       @(role.IsChecked ? "checked" : "") />
                <label class="form-check-label" for="@($"category_setting_{Model.SettingId}_role_{role.RoleCode}")">
                    @role.RoleText
                </label>
            </div>
        }
    </div>
</div>

@functions {
    private string GetCategoryRoleFieldName(int settingId)
    {
        return settingId switch
        {
            1 => "canCommentRoles",
            2 => "canAddMembersRoles",
            3 => "canRemoveMembersRoles",
            4 => "canEditAfterCompletionRoles",
            _ => "unknownRoles"
        };
    }
}
