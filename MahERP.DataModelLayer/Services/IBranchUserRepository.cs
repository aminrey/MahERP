using MahERP.DataModelLayer.Entities.AcControl;
using MahERP.DataModelLayer.ViewModels.UserViewModels;
using System.Collections.Generic;

namespace MahERP.DataModelLayer.Services
{
    public interface IBranchUserRepository
    {
        /// <summary>
        /// ?????? ???? ??????? ???? ?? ???? ????? ????
        /// </summary>
        /// <param name="branchId">????? ????</param>
        /// <param name="includeInactive">???? ??????? ???????</param>
        /// <returns>???? ??????? ????</returns>
        List<BranchUser> GetBranchUsersByBranchId(int branchId, bool includeInactive = false);

        /// <summary>
        /// ?????? ????? ???? ?? ???? ?????
        /// </summary>
        /// <param name="id">????? ????? ????</param>
        /// <returns>??????? ????? ????</returns>
        BranchUser GetBranchUserById(int id);

        /// <summary>
        /// ?????? ????? ???? ?? ???? ????? ????? ? ????
        /// </summary>
        /// <param name="userId">????? ?????</param>
        /// <param name="branchId">????? ????</param>
        /// <returns>??????? ????? ????</returns>
        BranchUser GetBranchUserByUserAndBranch(string userId, int branchId);

        /// <summary>
        /// ????? ???? ????? ?? ????
        /// </summary>
        /// <param name="userId">????? ?????</param>
        /// <param name="branchId">????? ????</param>
        /// <returns>true ??? ????? ?? ???? ???? ????</returns>
        bool UserExistsInBranch(string userId, int branchId);

        /// <summary>
        /// ?????? ???? ????????? ?? ????? ?? ????? ??? ???
        /// </summary>
        /// <param name="userId">????? ?????</param>
        /// <param name="includeInactive">???? ???????? ???????</param>
        /// <returns>???? ???????? ?????</returns>
        List<BranchUserViewModel> GetUserBranches(string userId, bool includeInactive = false);

        /// <summary>
        /// ?????? ????? ??????? ???? ?? ???? ?? ???? ???
        /// </summary>
        /// <param name="branchId">????? ????</param>
        /// <param name="role">??? (???????)</param>
        /// <returns>????? ???????</returns>
        int GetUsersCountByRole(int branchId, byte? role = null);

        /// <summary>
        /// ?????? ??????? ????
        /// </summary>
        /// <param name="branchId">????? ????</param>
        /// <param name="searchTerm">????? ?????</param>
        /// <param name="role">??? (???????)</param>
        /// <param name="isActive">????? ???? (???????)</param>
        /// <returns>???? ??????? ????? ???</returns>
        List<BranchUser> SearchBranchUsers(int branchId, string searchTerm = null, byte? role = null, bool? isActive = null);

        /// <summary>
        /// ?????? ?????? ????
        /// </summary>
        /// <param name="branchId">????? ????</param>
        /// <param name="includeInactive">???? ?????? ???????</param>
        /// <returns>???? ?????? ????</returns>
        List<BranchUser> GetBranchManagers(int branchId, bool includeInactive = false);

        /// <summary>
        /// ????? ????? ??? ????? ???? ???? ???
        /// </summary>
        /// <param name="userId">????? ?????</param>
        /// <param name="branchId">????? ????</param>
        /// <returns>true ??? ????? ???? ???? ????</returns>
        bool IsUserBranchManager(string userId, int branchId);

        /// <summary>
        /// ????? ????? ???? ????
        /// </summary>
        /// <param name="branchUser">??????? ????? ????</param>
        /// <returns>????? ????? ???? ????? ???</returns>
        int CreateBranchUser(BranchUser branchUser);

        /// <summary>
        /// ??????????? ??????? ????? ????
        /// </summary>
        /// <param name="branchUser">??????? ??????????? ???</param>
        /// <returns>true ?? ???? ??????</returns>
        bool UpdateBranchUser(BranchUser branchUser);

        /// <summary>
        /// ??? ????? ?? ????
        /// </summary>
        /// <param name="id">????? ????? ????</param>
        /// <returns>true ?? ???? ??????</returns>
        bool DeleteBranchUser(int id);

        /// <summary>
        /// ????/??????? ???? ????? ????
        /// </summary>
        /// <param name="id">????? ????? ????</param>
        /// <param name="isActive">????? ????</param>
        /// <returns>true ?? ???? ??????</returns>
        bool ToggleBranchUserStatus(int id, bool isActive);
    }
}